<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agregar Producto - Stock App</title>
    <link rel="stylesheet" href="/static/producto.css"> <!-- Asegúrate de que tu CSS esté en este archivo -->
    <link rel="stylesheet" href="/static/home.css">
    <link rel="stylesheet" href="/static/usuario.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <header>
        <div class="logo">
            <h1>Gestión de Productos</h1>
        </div>
        <div class="header-buttons">
            <a href="/logout" class="logout-button">Cerrar Sesión</a>
        </div>
    </header>

    <div class="container">
        <div class="sidebar">
            <div class="logo-sidebar">
                <img src="/static/img/logo.jpeg" alt="Logo" class="sidebar-logo">
            </div>
            <nav>
                <ul>
                    <li><a href="home.html" class="nav-button">Inicio</a></li>
                    <li><a href="usuario.html" class="nav-button">Usuarios</a></li>
                    <li><a href="proveedores.html" class="nav-button">Proveedores</a></li>
                    <li><a href="producto.html" class="nav-button">Productos</a></li>
                    <li><a href="detalle_venta.html" class="nav-button">Ventas</a></li>
                    <li><a href="inventario.html" class="nav-button">Inventario</a></li>
                </ul>
            </nav>
        </div>

        <div class="content">
            <!-- Contenedor principal para agregar producto -->
            <div class="add-product-container">
                <h3>Agregar Nuevo Producto</h3>
                <form id="addProductForm" method="POST">
                    <div class="form-group">
                        <label for="productId">ID de Producto:</label>
                        <input type="text" id="productId" name="productId" placeholder="Ingrese el ID del producto" required>
                    </div>

                    <div class="form-group">
                        <label for="productName">Nombre del Producto:</label>
                        <input type="text" id="productName" name="productName" placeholder="Ingrese el nombre del producto" required>
                    </div>

                    <div class="form-group">
                        <label for="productDescription">Descripción:</label>
                        <input type="text" id="productDescription" name="productDescription" placeholder="Ingrese la descripción del producto" required>
                    </div>

                    <div class="form-group">
                        <label for="productPrice">Precio:</label>
                        <input type="number" id="productPrice" name="productPrice" placeholder="Ingrese el precio del producto" required>
                    </div>

                    <div class="form-group">
                        <label for="productQuantity">Cantidad en Stock:</label>
                        <input type="number" id="productQuantity" name="productQuantity" placeholder="Ingrese la cantidad disponible" required>
                    </div>

                    <div class="form-group">
                        <button type="submit" class="btn">Agregar Producto</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <p>&copy; 2024 Stock App. Todos los derechos reservados.</p>
            <nav>
                <ul>
                    <li><a href="/templates/contacto.html">Contacto</a></li>
                </ul>
            </nav>
        </div>
    </footer>

    <script>
        $(document).ready(function() {
            // Animación de entrada
            $('.container').hide().fadeIn(1000);

            // Manejar el formulario de agregar producto
            $('#addProductForm').submit(function(e) {
                e.preventDefault(); // Evitar que el formulario recargue la página

                const productId = $('#productId').val().trim();
                const productName = $('#productName').val().trim();
                const productDescription = $('#productDescription').val().trim();
                const productPrice = $('#productPrice').val().trim();
                const productQuantity = $('#productQuantity').val().trim();

                // Validación de los campos (opcional, ya que el "required" está en los campos)
                if (!productId || !productName || !productDescription || !productPrice || !productQuantity) {
                    alert("Por favor complete todos los campos.");
                    return;
                }

                // Realizar la solicitud AJAX para agregar el producto
                $.ajax({
                    url: '/api/agregar-producto',  // URL de la ruta en el servidor que maneja el agregar producto
                    method: 'POST',
                    data: {
                        productId: productId,
                        productName: productName,
                        productDescription: productDescription,
                        productPrice: productPrice,
                        productQuantity: productQuantity
                    },
                    success: function(response) {
                        if (response.success) {
                            alert('Producto agregado exitosamente!');
                            $('#addProductForm').trigger("reset");  // Limpiar el formulario
                        } else {
                            alert('Error al agregar el producto.');
                        }
                    },
                    error: function() {
                        alert("Error en la solicitud. Inténtalo de nuevo.");
                    }
                });
            });
        });
    </script>
</body>
</html>
